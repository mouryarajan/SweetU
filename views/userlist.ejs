<!DOCTYPE html>
<html lang="en">

<head>

	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<meta name="description" content="" />
	<meta name="author" content="" />

	<title>
		<%= pageTitle %>
	</title>

	<!-- Main Styles -->
	<link rel="stylesheet" href="/styles/style.min.css" />

	<!-- Material Design Icon -->
	<link rel="stylesheet" href="/fonts/material-design/css/materialdesignicons.css" />

	<!-- mCustomScrollbar -->
	<link rel="stylesheet" href="/plugin/mCustomScrollbar/jquery.mCustomScrollbar.min.css" />

	<!-- Waves Effect -->
	<link rel="stylesheet" href="/plugin/waves/waves.min.css" />

	<!-- Sweet Alert -->
	<link rel="stylesheet" href="/plugin/sweet-alert/sweetalert.css" />

	<!-- Data Tables -->
	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" />
	<link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.6.5/css/buttons.dataTables.min.css" />

	<!-- Color Picker -->
	<link rel="stylesheet" href="/color-switcher/color-switcher.min.css" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>

<body>
	<%- include('includes/sidebar.ejs') %>
		<!-- /.main-menu -->

		<%- include('includes/header.ejs') %>
			<!-- /.fixed-navbar -->

			<div id="wrapper">
				<div class="main-content">
					<div class="row small-spacing">
						<div class="col-xs-12">
							<div class="box-content">
								<form method="POST" action="/filter-user">
									<div class="col-xs-5">
									<label for="inputStartDate">Start Date</label>
									<input type="date" class="form-control" name="inputStartDate" id="inputStartDate"/></div>
									<div class="col-xs-5">
									<label for="inputEndDate">End Date</label>
									<input type="date" class="form-control" name="inputEndDate" id="inputEndDate"/></div>
									<div class="col-xs-1">
										<label for="inputGender">Gender</label>
										<select class="form-control" name="inputGender" id="inputGender">
											<option value="Both" selected>Both</option>
											<option value="Male">Male</option>
											<option value="Female">Female</option>
										  </select>
									</div>
									<div class="col-xs-1">
										<label for="inputGender">Action</label>
									<input type="submit" class="btn btn-primary waves-effect waves-light" value="Show"></div>
								</form>
							</div>
							<!-- /.box-content -->
						</div>
						<div class="col-xs-12">
							<div class="box-content">
								<!-- <form>
									<input type="date">
								</form> -->
								<table id="example" class="display" style="width:100%">
									<thead>
										<tr>
											<th>#</th>
											<th>Name</th>
											<th>Email Id</th>
											<th>Gender</th>
											<th>Status</th>
											<th>Date</th>
											<th>Action</th>
										</tr>
									</thead>
									<tbody>
										<% let count=1; for (let user of users) { %>
											<tr>
												<td>
													<%= count %>
												</td>
												<td>
													<%= user.user_name %>
												</td>
												<td>
													<%= user.user_emailId %>
												</td>
												<td>
													<%= user.user_gender %>
												</td>
												
												<td>
													<% if(user.user_isAuthorised){ %>
														<a href="/user-unauthorise/<%= user._id %>"
															class="btn btn-success btn-xs waves-effect waves-light">Authorised</a>
														<%} else{ %>
															<a href="/user-authorise/<%= user._id %>"
																class="btn btn-danger btn-xs waves-effect waves-light">Unauthorised</a>
															<% } %>
												</td>
												<td>
													<% var dat = user.createdAt.toString();
													var x = dat.split(" "); %>
													<%= x[2] %>&nbsp;<%= x[1] %>&nbsp;<%= x[3] %>
												</td>
												<td>
													<a href="/user-detail/<%= user._id %>"
														class="btn btn-success btn-xs waves-effect waves-light">View</a>
													<a href="/user-edit/<%= user._id %>?edit=true"
														class="btn btn-info btn-xs waves-effect waves-light">Edit</a>
													<!-- <a href="/user-delete/<%= user._id %>"
														class="btn btn-danger btn-xs waves-effect waves-light">Delete</a>
													<input type="hidden" name="deleteId" value="<%= user._id %>">
													<button type="button" name="deleteBtn" onclick="deleteUser(this)"
														class="btn btn-danger btn-xs waves-effect waves-light">Delete</button> -->
													<% if(user.user_isBlock){ %>
														<a href="/user-unblock/<%= user._id %>"
															class="btn btn-danger btn-xs waves-effect waves-light">Unblock</a>
														<% }else{ %>
															<a href="/user-block/<%= user._id %>"
																class="btn btn-danger btn-xs waves-effect waves-light">Block</a>
															<% } %>
												</td>
											</tr>
											<%count++; } %>
									</tbody>
								</table>
							</div>
							<!-- /.box-content -->
						</div>
						<!-- /.col-xs-12 -->
					</div>
					<!-- /.row small-spacing -->
					<%- include('includes/footer.ejs') %>
				</div>
				<!-- /.main-content -->
			</div>
			<!--/#wrapper -->
			<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
			<!--[if lt IE 9]>
		<script src="assets/script/html5shiv.min.js"></script>
		<script src="assets/script/respond.min.js"></script>
	<![endif]-->
			<!-- 
	================================================== -->
			<!-- Placed at the end of the document so the pages load faster -->
			<script src="/scripts/jquery.min.js"></script>
			<script src="/scripts/modernizr.min.js"></script>
			<script src="/plugin/bootstrap/js/bootstrap.min.js"></script>
			<script src="/plugin/mCustomScrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
			<script src="/plugin/nprogress/nprogress.js"></script>
			<script src="/plugin/sweet-alert/sweetalert.min.js"></script>
			<script src="/plugin/waves/waves.min.js"></script>
			<!-- Full Screen Plugin -->
			<script src="/plugin/fullscreen/jquery.fullscreen-min.js"></script>

			<!-- Data Tables -->
			<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
			<script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
			<script src="https://cdn.datatables.net/buttons/1.6.5/js/dataTables.buttons.min.js"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
			<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
			<script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.html5.min.js"></script>
			<script>
				$(document).ready(function () {
					$('#example').DataTable({
						dom: 'Bfrtip',
						buttons: [
							'copyHtml5',
							'excelHtml5',
							'csvHtml5',
							'pdfHtml5'
						]
					});
				});
			</script>

			<script src="/scripts/main.min.js"></script>
			<script src="/js/user.js"></script>
</body>

</html>